---
export const prerender = true;
import BaseLayout from '../../layouts/BaseLayout.astro';
import ContentWrapper from '../../components/ContentWrapper.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../../consts';
import FormattedDate from '../../components/FormattedDate.astro';
import result from 'postcss/lib/result';
// import { getCollection } from 'astro:content';
// import FormattedDate from '../../components/FormattedDate.astro';

// const posts = (await getCollection('blog')).sort(
// 	(a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
// );

let response = await fetch('http://localhost:8080/wp-json/wp/v2/posts?_embed&acf_format=standard');
if (!response.ok) {
	throw new Error(`HTTP error! status: ${response.status}`);
}
let posts = await response.json();

// 各ページで使うデータ
// const { paged } = Astro.params;
---

<BaseLayout title={`視点の専門家に聞く | ${SITE_TITLE}`} description={SITE_DESCRIPTION}>
	<section class="u-margin__top144 u-margin__bottom96">
		<ContentWrapper>
			<h1>視点の専門家に聞く</h1>
			<ul class="l-grid">
				{
					posts.map(post => (
						<li class="i-grid__item">
							<a href={`/blog/${post.slug}`}>
								<h2 set:html={post.title.rendered} />
							</a>
						</li>
					))
				}
			</ul>
		</ContentWrapper>
	</section>
</BaseLayout>
